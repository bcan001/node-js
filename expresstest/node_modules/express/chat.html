<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Chat Room</title>
	
	<link rel="stylesheet" type="text/css" href="/bootstrap.min.css" />
	<link rel="stylesheet" type="text/css" href="/styles.css" />
	<script src="/jquery-2.1.3.min.js" /></script>

	<!-- <script src="https://cdn.socket.io/socket.io-1.3.4.js"></script> -->
	<!-- <script src="//code.jquery.com/jquery-1.11.0.min.js"></script> -->
	<script src='/socket.io/socket.io.js'></script>

</head>
<body>

	<h1 id="title">Welcome to the Chat Room!</h1>

	<h3>Other Chatters Online:</h3>
	<div id="chatters"></div>


	<div id="chat_box">
		<h3>Current Chat:</h3>
		<form id="chat_form">
			Type Message Here:<br>
			<input id="chat_input" type="text" name="message"><br>
			<input type="submit" value="Submit">
		</form>

		<div id="message_list"></div>
	</div>







	<script>
	
		var socket = io.connect("http://localhost:3000");
		// socket.on('messages', function(data) {
		// 	alert(data.hello);
		// });

		socket.on("connect", function(data) {
			//$("#status").html("connected to chattr");
			nickname = prompt("what is your nickname?");
			socket.emit("join", nickname);


		});

		$("#chat_form").submit(function(e) {
			e.preventDefault();
			var message = $("#chat_input").val();
			socket.emit("messages", message);
			$("#chat_input").val('');
		});

		var insertMessage = function(data) {
			console.log(data);
			$('#message_list').append('<li>'+data+'</li>');

		};
	
		socket.on("messages", function(data) { 
			insertMessage(data) 
		});

		socket.on("add chatter", function(name) {
			var chatter = $("<li>" +name+ "</li>").data('name', name);
			$("#chatters").append(chatter);
		});


		socket.on("remove chatter", function(name) {
			//console.log(name);
			$('#chatters').remove('li:eq(' +name+ ')'); // use jquery to remove the list item from the list
		});


	</script>



</body>
</html>