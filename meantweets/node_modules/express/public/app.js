var meanTweet = angular.module('mtapp', ['ngRoute', 'ngResource']).run(function($rootScope, $http) {
	// default the user to NOT authenticated
	$rootScope.authenticated = false;
	$rootScope.current_user = '';

	$rootScope.signout = function() {
		$http.get('/auth/signout');

		$rootScope.authenticated = false;
		$rootScope.current_user = '';
	};
});

meanTweet.config(function($routeProvider){
  $routeProvider
    //the timeline display
    .when('/', {
      templateUrl: 'main.html',
      controller: 'mainController'
    })
    //the login display
    .when('/login', {
      templateUrl: 'login.html',
      controller: 'authController'
    })
    //the signup display
    .when('/register', {
      templateUrl: 'register.html',
      controller: 'authController'
    });
});


// get all the posts from our api/posts endpoint
// app.factory('postService', function($http){
//   var baseUrl = "/api/posts";
//   var factory = {};
//   factory.getAll = function(){
//     return $http.get(baseUrl);
//   };
//   return factory;
// });

meanTweet.factory('postService', function($resource){
  return $resource('/api/posts/:id');
});











