// add your dependencies inside the function
meanTweet.controller("mainController", function(postService, $scope, $rootScope){

	$scope.posts = postService.query();
	// initialize attributes of a new post
	$scope.newPost = {created_by: '', text: '', created_at: ''};

	// fill the empty array with data from api/posts endpoint
	// postService.getAll().success(function(data){
 //    $scope.posts = data;
 //  });

	// post function on our scope so it can be called in our application
	$scope.post = function() {
	  $scope.newPost.created_by = $rootScope.current_user;
	  $scope.newPost.created_at = Date.now();
	  postService.save($scope.newPost, function(){
	    $scope.posts = postService.query();
	    $scope.newPost = {created_by: '', text: '', created_at: ''};
	  });
	};


});


// put dependencies in function
meanTweet.controller("authController", function($scope, $rootScope, $http, $location) {

	$scope.user = {username: '', password: ''};
	$scope.error_message = '';

	$scope.login = function() {
		//$scope.error_message = 'login request for ' + $scope.user.username;
		$http.post('/auth/login', $scope.user).success(function(data) {
			$rootScope.authenticated = true;
			$rootScope.current_user = data.user.username;
			// redirect user to our root after logging in
			$location.path('/');
		});

	};

	$scope.register = function() {
		//$scope.error_message = 'registration request for ' + $scope.user.username;
		$http.post('/auth/signup', $scope.user).success(function(data) {
			$rootScope.authenticated = true;
			$rootScope.current_user = data.user.username;
			// redirect user to our root after logging in
			$location.path('/');
		});
	};

});






